"use client";

import { useState } from "react";

type Props = {
  range?: 0 | 1 | 2 | 3 | 4 | 5;
  onChange?: (value: number) => void;
};

const Range = ({ range = 0, onChange }: Props) => {
  const [hovered, setHovered] = useState<number | null>(null);
  const [selected, setSelected] = useState<number>(range);

  const handleClick = (value: number) => {
    setSelected(value);
    onChange?.(value);
  };

  const displayValue = hovered ?? selected;

  return (
    <div className="flex">
      {Array.from({ length: 5 }, (_, i) => {
        const index = i + 1;
        const isFilled = index <= displayValue;

        return (
          <div
            key={index}
            className="cursor-pointer px-0.5"
            onMouseEnter={() => setHovered(index)}
            onMouseLeave={() => setHovered(null)}
            onClick={() => handleClick(index)}
          >
            {isFilled ? filledStar : outlineStar}
          </div>
        );
      })}
    </div>
  );
};

const filledStar = (
  <svg
    width="20"
    height="20"
    viewBox="0 0 20 20"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M19.1711 7.41256C19.1134 7.24274 19.0073 7.09353 18.8658 6.98335C18.7243 6.87316 18.5537 6.80681 18.3749 6.79251L13.1458 6.377L10.883 1.36798C10.8109 1.20665 10.6937 1.06963 10.5455 0.973442C10.3972 0.877257 10.2244 0.826025 10.0477 0.825928C9.87097 0.825831 9.69802 0.876874 9.5497 0.972896C9.40137 1.06892 9.28401 1.20582 9.21177 1.36707L6.94895 6.377L1.7198 6.79251C1.54411 6.80642 1.37614 6.87066 1.23601 6.97754C1.09587 7.08442 0.989488 7.2294 0.929593 7.39516C0.869698 7.56091 0.858824 7.74041 0.898271 7.91218C0.937719 8.08395 1.02582 8.24072 1.15203 8.36373L5.01634 12.1308L3.64966 18.0488C3.60816 18.2279 3.62146 18.4154 3.68783 18.5869C3.7542 18.7584 3.87059 18.9059 4.02187 19.0105C4.17316 19.115 4.35237 19.1716 4.53624 19.173C4.72011 19.1744 4.90016 19.1205 5.05303 19.0183L10.0474 15.6888L15.0417 19.0183C15.1979 19.1221 15.3822 19.1755 15.5697 19.1713C15.7572 19.1672 15.9389 19.1058 16.0905 18.9953C16.242 18.8848 16.3561 18.7306 16.4173 18.5533C16.4786 18.3761 16.4841 18.1843 16.4331 18.0039L14.7555 12.1336L18.9161 8.38941C19.1885 8.14359 19.2885 7.76019 19.1711 7.41256Z"
      fill="#F3CD03"
    />
  </svg>
);

const outlineStar = (
  <svg
    width="20"
    height="20"
    viewBox="0 0 20 20"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M5.0319 12.1308L3.66522 18.0488C3.6229 18.228 3.63561 18.4158 3.70168 18.5877C3.76775 18.7596 3.88411 18.9075 4.03557 19.0122C4.18703 19.1169 4.36655 19.1735 4.55068 19.1746C4.7348 19.1757 4.91498 19.1212 5.06767 19.0183L10.062 15.6888L15.0564 19.0183C15.2126 19.1221 15.3968 19.1755 15.5843 19.1714C15.7718 19.1673 15.9536 19.1058 16.1051 18.9953C16.2567 18.8849 16.3707 18.7306 16.432 18.5534C16.4933 18.3761 16.4988 18.1844 16.4478 18.0039L14.7702 12.1336L18.9308 8.38944C19.064 8.26946 19.1592 8.11304 19.2045 7.93955C19.2498 7.76605 19.2432 7.58308 19.1856 7.41327C19.1281 7.24345 19.022 7.09424 18.8805 6.98408C18.739 6.87392 18.5683 6.80764 18.3896 6.79345L13.1604 6.37703L10.8976 1.36801C10.8255 1.20672 10.7082 1.06976 10.5599 0.973657C10.4116 0.877554 10.2387 0.826416 10.062 0.826416C9.88532 0.826416 9.7124 0.877554 9.56413 0.973657C9.41586 1.06976 9.29857 1.20672 9.22641 1.36801L6.9636 6.37703L1.73445 6.79254C1.55875 6.80645 1.39079 6.87069 1.25065 6.97757C1.11052 7.08445 1.00414 7.22943 0.944242 7.39518C0.884346 7.56094 0.873472 7.74044 0.91292 7.91221C0.952367 8.08398 1.04047 8.24074 1.16668 8.36376L5.0319 12.1308ZM7.64877 8.16288C7.81249 8.14998 7.96973 8.09328 8.104 7.99871C8.23827 7.90414 8.34462 7.77519 8.41191 7.62538L10.062 3.97387L11.7121 7.62538C11.7794 7.77519 11.8858 7.90414 12.02 7.99871C12.1543 8.09328 12.3115 8.14998 12.4753 8.16288L16.1185 8.45181L13.1182 11.1521C12.8577 11.387 12.7541 11.7484 12.8495 12.0859L13.9988 16.108L10.572 13.8231C10.4216 13.7222 10.2445 13.6683 10.0634 13.6683C9.88224 13.6683 9.70519 13.7222 9.55478 13.8231L5.9739 16.2107L6.937 12.0409C6.97231 11.8876 6.96757 11.7277 6.92323 11.5767C6.8789 11.4257 6.79646 11.2887 6.68384 11.1787L3.89728 8.4619L7.64877 8.16288Z"
      fill="#F3CD03"
    />
  </svg>
);

export { Range };
